<!doctype html>
<html lang="fr">
    <head>
        <meta charset="UTF-8" />
        <title>Liste des Produits</title>

        <!-- ‚úÖ ÿßÿ≥ÿ™ÿØÿπÿßÿ° ŸÖŸÉÿ™ÿ®ÿ© Bootstrap + FontAwesome + Excel -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
        />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
        />
        <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Option 1: Include in HTML -->
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css"
        />

        <!-- code css nav bar  -->
        <link rel="stylesheet" href="/css/navb.css" />

        <style>
            body {
                background-color: #f8f9fa;
            }

            table {
                font-size: 18px;
                font-weight: 700;
            }

            #topLoad {
                display: flex;
                justify-content: center;
                align-items: center;
                display: none;
                /* ŸÖÿÆŸÅŸä ÿßŸÅÿ™ÿ±ÿßÿ∂ŸäÿßŸã */

                inset: 0;
                /* Ÿäÿ∫ÿ∑Ÿä ŸÉÿßŸÖŸÑ ÿßŸÑÿµŸÅÿ≠ÿ© */
                background: rgb(224, 221, 221, 0.6);
                width: 100vw;
                height: 100vh;
                z-index: 9999;
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
            }

            #loading {
                /* ŸÖÿ≠ÿßÿ∞ÿßÿ© ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ ŸÅŸä ŸÖŸÜÿ™ÿµŸÅ ÿßŸÑÿ¥ÿßÿ¥ÿ© */
                /* ŸÜÿµ ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ */
                font-size: 3rem;
                font-weight: bold;
                color: #3734cee1;
                font-weight: 700;
                text-shadow: 3px 5px 2px rgba(128, 0, 0, 0.69);
                text-align: center;
                text-shadow: 0 0 10px rgba(0, 0, 0, 0.7);
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 100%;
                /* ÿ™ŸÖŸàÿ∂ÿπ ÿßŸÑÿπŸÜÿµÿ± ÿ®ÿØŸÇÿ© ŸÅŸä ŸÖŸÜÿ™ÿµŸÅ ÿßŸÑÿ¥ÿßÿ¥ÿ© */
            }

            #loading i {
                font-size: 150px;
                margin-right: 30px;
                color: #41c72de1;
            }

            .bott {
                display: flex;
                justify-content: space-around;
                align-items: center;
            }

            #editProductModal {
                position: fixed;
                inset: 0;
                background: rgba(0, 0, 0, 0.55);
                display: none;
                align-items: center;
                justify-content: center;
                z-index: 9999;
            }

            .modal-content {
                background: #fff;
                width: 95%;
                max-width: 700px;
                border-radius: 10px;
                padding: 20px;
                position: relative;
                left: 10%;
                top: 30%;
                transform: translate(-50%, -50%);
                box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;

                -webkit-animation: scale-up-center 0.4s
                    cubic-bezier(0.39, 0.575, 0.565, 1) both;
                animation: scale-up-center 0.4s
                    cubic-bezier(0.39, 0.575, 0.565, 1) both;
            }

            /**
 * ----------------------------------------
 * animation scale-up-center
 * ----------------------------------------
 */
            @-webkit-keyframes scale-up-center {
                0% {
                    -webkit-transform: scale(0.5);
                    transform: scale(0.5);
                }
                100% {
                    -webkit-transform: scale(1);
                    transform: scale(1);
                }
            }
            @keyframes scale-up-center {
                0% {
                    -webkit-transform: scale(0.5);
                    transform: scale(0.5);
                }
                100% {
                    -webkit-transform: scale(1);
                    transform: scale(1);
                }
            }

            .modal-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                border-bottom: 1px solid #eee;
                margin-bottom: 15px;
            }

            .modal-header h3 {
                margin: 0;
                font-size: 18px;
            }

            .close {
                font-size: 22px;
                cursor: pointer;
            }

            .form-group {
                display: flex;
                flex-direction: column;
                margin-bottom: 12px;
            }

            .form-group label {
                margin-bottom: 5px;
                font-weight: 600;
                text-align: center;
                letter-spacing: 1px;
                font-size: 20px;
            }

            .form-group input {
                padding: 8px;
                border-radius: 5px;
                border: 1px solid #ccc;
                font-weight: 700;
                letter-spacing: 1px;
                text-align: center;
            }
            .edit {
                background: #d9ff0038;
            }

            .form-row {
                display: flex;
                justify-content: space-around;
                align-items: center;
                gap: 10px;
                margin-bottom: 10px;
            }

            .modal-actions {
                display: flex;
                justify-content: flex-end;
                gap: 10px;
                margin-top: 15px;
            }
            .btnRed {
                background: #dc3545;
                color: #fff;
            }
            .btnRed:hover {
                background: #b52a36;
            }
            .btnBlue {
                background: #007bff;
                color: #fff;
            }
            .btnBlue:hover {
                background: #007bff;
            }

            /* Responsive */
            @media (max-width: 600px) {
                .form-row {
                    flex-direction: column;
                }
            }
        </style>
    </head>

    <body>
        <!-- ŸÖŸÉÿßŸÜ ÿßŸÑÿ±ÿ≥ÿßÿ¶ŸÑ -->
        <div id="toast" class="toast"></div>
        <nav class="navbar navbar-dark bg-dark mb-4">
            <div
                class="container-fluid d-flex justify-content-between align-items-center"
            >
                <span class="navbar-brand mb-0 h1">
                    <i class="fas fa-users"></i> Inventaire Complet des Produits
                    et Vendeurs (<span class="fs-4 text-bg-success"
                        >Sans Group√©s</span
                    >)
                </span>
                <button class="btn btn-primary me-2" id="btnRefresh">
                    <i class="fas fa-rotate-right"></i> Rafra√Æchir
                </button>
            </div>
        </nav>
        <div id="topLoad">
            <div id="loading">
                <i class="bi bi-battery-charging"></i> Chargement des donn√©es...
            </div>
        </div>

        <div class="container-fluid py-4">
            <!-- üîπ Barre de contr√¥le -->
            <div class="row mb-3 align-items-center">
                <div class="col-md-3 mb-2">
                    <input
                        type="text"
                        id="searchInput"
                        class="form-control"
                        placeholder="üîç Rechercher un produit par Libell√©, ANPF, Gencode ou Adresse..."
                    />
                </div>
                <div class="col-md-2 mb-2">
                    <button class="btn btn-primary w-100" id="btnSearch">
                        <i class="fas fa-search"></i> Rechercher
                    </button>
                </div>
                <div class="col-md-3 mb-2">
                    <select id="rowsPerPage" class="form-select">
                        <option value="10" selected>10 produits / page</option>
                        <option value="25">25 produits / page</option>
                        <option value="50">50 produits / page</option>
                        <option value="100">100 produits / page</option>
                    </select>
                </div>
                <div class="col-md-4 text-end mb-2">
                    <button class="btn btn-danger" id="btnOpen">
                        <i class="bi bi-google"></i> Open Page
                    </button>
                    <button class="btn btn-success m-5" id="btnExcel">
                        <i class="fas fa-file-excel"></i> Excel
                    </button>
                </div>
            </div>

            <!-- üîπ Tableau -->
            <div class="table-responsive shadow rounded">
                <table class="table table-striped table-bordered align-middle">
                    <thead class="table-dark text-center">
                        <tr>
                            <th>Libell√©</th>
                            <th>Gencode</th>
                            <th>ANPF</th>
                            <th>Fournisseur</th>
                            <th>Stock System</th>
                            <th>Prix</th>
                            <th>Quantit√© R√©el</th>
                            <th>Adresse</th>
                            <th>Vendeur</th>
                            <th>L'emplacement</th>
                            <th>Btn edite</th>
                        </tr>
                    </thead>
                    <tbody id="produitsTableBody" class="text-center"></tbody>
                </table>
            </div>

            <!-- üîπ Pagination -->
            <div class="d-flex justify-content-between align-items-center mt-3">
                <span id="infoPagination" class="text-muted small"></span>
                <nav>
                    <ul
                        class="pagination pagination-sm mb-0"
                        id="pagination"
                    ></ul>
                </nav>
            </div>
        </div>
        <!-- ‚úÖ Toast Bootstrap -->
        <div class="position-fixed top-0 end-0 p-3" style="z-index: 9999">
            <div
                id="excelToast"
                class="toast align-items-center text-bg-success border-0"
                role="alert"
                aria-live="assertive"
                aria-atomic="true"
            >
                <div class="d-flex">
                    <div class="toast-body">
                        ‚úÖ Fichier Excel t√©l√©charg√© avec succ√®s !
                    </div>
                    <button
                        type="button"
                        class="btn-close btn-close-white me-2 m-auto"
                        data-bs-dismiss="toast"
                        aria-label="Close"
                    ></button>
                </div>
            </div>
        </div>
        <!--nav FAB Button -->
        <div class="containeer">
            <div class="menu-toggle">
                <span class="fa fa-plus"></span>
            </div>
            <div class="menu-round">
                <div class="btn-app" data-label="Dashboard">
                    <div class="fa">
                        <a href="/dashboard"
                            ><i
                                class="fa-solid fa-circle-left"
                                style="color: white"
                            ></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <!--fin FAB Button -->
        <!-- ŸÖŸàÿØÿßŸÑ ÿπÿ±ÿ∂ ÿßŸÑÿπŸÜÿßŸàŸäŸÜ -->
        <div id="adressModal" class="custom-modal" style="display: none">
            <div class="custom-modal-content">
                <button
                    id="closeAdressModal"
                    class="btn btn-danger btn-sm"
                    style="float: right"
                >
                    Fermer √ó
                </button>
                <h3 class="mb-5 text-center text-success">
                    Rechercher un produit avec aper√ßu visuel
                </h3>
                <iframe src="/searchee"></iframe>
            </div>
        </div>
        <!-- Modal ÿ™ÿπÿØŸäŸÑ ŸÖŸÜÿ™ÿ¨ -->
        <div
            id="editProductModal"
            class="modal"
            onclick="closeOnOverlay(event)"
        >
            <div class="modal-content">
                <div class="modal-header">
                    <h3>
                        <i class="fa fa-pen-to-square"></i> Modifier le produit
                    </h3>
                    <span class="close" onclick="closeEditModal()"
                        >&times;</span
                    >
                </div>

                <form id="editProductForm">
                    <input type="hidden" id="edit_id" />

                    <div class="form-group">
                        <label><i class="fa fa-box"></i> Libell√©</label>
                        <input
                            type="text"
                            id="edit_libelle"
                            required
                            readonly
                        />
                    </div>

                    <div class="form-group">
                        <label><i class="fa fa-barcode"></i> Code-barres</label>
                        <input type="text" id="edit_gencode" readonly />
                    </div>
                    <div class="form-group">
                        <label
                            ><i class="fa-regular fa-hand-point-up"></i>
                            S√©lectionnez ce que vous voulez calculer</label
                        >
                        <select
                            id="edit_calcul"
                            class="form-control"
                            style="
                                background: palegoldenrod;
                                font-weight: 700;
                                text-align: center;
                            "
                        >
                            <option value="">
                                -- S√©lectionnez ce que vous voulez calculer --
                            </option>
                            <option value="casquette">Casquette</option>
                            <option value="fondRayon">Fond Rayon</option>
                            <option value="reserve">R√©serve</option>
                        </select>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label
                                ><i class="fa fa-truck"></i> Fournisseur</label
                            >
                            <input type="text" id="edit_Fournisseur" readonly />
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label
                                    ><i class="fa-solid fa-qrcode"></i>
                                    Anpf</label
                                >
                                <input type="text" id="edit_anpf" readonly />
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label><i class="fa fa-warehouse"></i> STOCK</label>
                            <input type="number" id="edit_stock" readonly />
                        </div>

                        <div class="form-group">
                            <label
                                ><i class="fa fa-clipboard-check"></i>
                                Comptage</label
                            >
                            <input
                                type="number"
                                id="edit_qteInven"
                                class="edit"
                            />
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label><i class="fa fa-euro-sign"></i> Prix</label>
                            <input
                                type="number"
                                step="0.01"
                                id="edit_prix"
                                readonly
                            />
                        </div>

                        <div class="form-group">
                            <label
                                ><i class="fa fa-location-dot"></i>
                                Adresse</label
                            >
                            <input type="text" id="edit_adresse" class="edit" />
                        </div>
                    </div>

                    <div class="modal-actions">
                        <button type="submit" class="btnBlue">
                            <i class="fa fa-save"></i> Enregistrer
                        </button>
                        <button
                            type="button"
                            class="btnRed"
                            onclick="closeEditModal()"
                        >
                            <i class="fa fa-times"></i> Annuler
                        </button>
                    </div>
                </form>
            </div>
        </div>
                <!-- ÿÆŸÑŸÅŸäÿ© ÿ™ÿ∫ÿ∑Ÿä ÿßŸÑÿ¥ÿßÿ¥ÿ© -->
        <div
            id="passwordOverlay"
            style="
                position: fixed;
                inset: 0;
                background: rgb(128, 120, 120);
                display: none;
                justify-content: center;
                align-items: center;
                z-index: 9999;
            "
        >
            <div
                style="
                    background: white;
                    padding: 25px;
                    border-radius: 10px;
                    width: 80%;
                    margin: 0 auto;
                    text-align: center;
                    box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
                "
            >
                <h3>üîê Acc√®s prot√©g√©</h3>
                <p>Veuillez entrer le mot de passe :</p>
                <input
                    id="passwordInput"
                    type="password"
                    style="
                        width: 100%;
                        padding: 10px;
                        margin: 10px 0;
                        border-radius: 8px;
                        border: 1px solid #aaa;
                    "
                />
                <button
                    onclick="submitPassword()"
                    style="
                        padding: 10px;
                        width: 100%;
                        background: #007bff;
                        color: white;
                        border: none;
                        border-radius: 8px;
                        cursor: pointer;
                    "
                >
                    Entrer
                </button>

                <p id="errorMsg" style="color: red; margin-top: 10px"></p>
            </div>
        </div>
        <!-- JS Libraries (ÿ™ÿ±ÿ™Ÿäÿ® ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ ŸÖŸáŸÖ) -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

        <script src="js/editProduitInv.js"></script>
        <script src="js/main2.js"></script>
    </body>
</html>
